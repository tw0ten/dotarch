#!/bin/bash
[[ $- = *i* ]] || return $(true)

PS1=$(
	esc() { echo "\[$1\]"; }
	r=$(esc $normal)
	c=$(esc $accent)
	b=$(esc $bold$accent)
	PS1="\u$b@$r\h $b\w="
	[[ $(id -u) = 0 ]] && PS1="\h $b\w#"
	[[ -n "$SSH_CONNECTION" ]] && PS1="ssh$c:$r$PS1"
	PS1="$c\$([[ \$? = 0 ]] && echo + || echo -)$r $PS1"
	echo "$r$PS1$r"
)

mklc() {
	local dir="$DOTFILES/etc/lc"
	cp -i "$dir/$1" LICENSE || { dir "$dir"; return $(false); }
	sed -i "0,/{YEAR}/s//$(command date +%Y)/" LICENSE
	sed -i "0,/{NAME}/s//$(git config --get user.name)/" LICENSE
	sed -i "0,/{EMAIL}/s//$(git config --get user.email)/" LICENSE
	head -n 5 LICENSE
}
ff() { find / -name "*$**" 2> /dev/null | $PAGER; }
mktl() {
	mkdir "$1" && cd "$1" || return
	git init
	mkdir src lib
	mkdir io io/i
	echo "io/o" > .gitignore
	echo "# $1" >> README.md
	echo -e "#!/bin/sh\nrm -rf io/o\nmkdir io/o\n\ncd io\ncd o" > run
	chmod +x run
	ls
}
mhm() { fortune | cowsay -n -f "$(cowsay -l | grep "/" -v | tr " " "\n" | shuf -n1)" | lolcat; }

alias clone="($TERMINAL &)"
alias sshs="eval \$(ssh-agent -s)"
alias date="date +'[%w.%d/%m|%H:%M]'"
alias uptime="uptime -p"
alias c="xsel --input --clipboard"
alias v="xsel --output --clipboard"
alias ls="ls --color=auto --group-directories-first"
alias lsa="ls -A"
alias gitc="git clone --depth 1"
alias vim="nvim"
alias svim="sudo nvim"
alias py="python"

[[ -f ~/.tmprc ]] && . ~/.tmprc

export SHINFO="$(tty):$SHLVL '$-'"
fastfetch -C ~/.config/fastfetch/mini.jsonc
unset SHINFO
